Merge "test.geo_unrolled";
Merge "test02.geo_unrolled";
//+
BSpline(1) = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22};
BSpline(2) = {22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50};
BSpline(3) = {50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75};
BSpline(4) = {75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 1};

BSpline(5) = {102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122};
BSpline(6) = {122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150};
BSpline(7) = {150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175};
BSpline(8) = {175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 102};

Line(9) = {1, 102};
Line(10) = {22, 122};
Line(11) = {50, 150};
Line(12) = {75, 175};
//+
Curve Loop(1) = {9, 5, -10, -1};
Surface(1) = {1};
Curve Loop(2) = {10, 6, -11, -2};
Surface(2) = {2};
Curve Loop(3) = {11, 7, -12, -3};
Surface(3) = {3};
Curve Loop(4) = {12, 8, -9, -4};
Surface(4) = {4};

Transfinite Curve {5, 6, 7, 8, 4, 1, 2, 3} = 30 Using Progression 1;
Transfinite Curve {9, 10, 11, 12} = 3 Using Progression 1;
Transfinite Surface {1} = {102, 122, 22, 1};
Transfinite Surface {2} = {122, 150, 50, 22};
Transfinite Surface {3} = {150, 175, 75, 50};
Transfinite Surface {4} = {175, 102, 1, 75};

//// TOP SURFACE
BSpline(13) = {1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009, 1010, 1011,1012, 1013, 1014, 1015, 1016, 1017, 1018, 1019, 1020, 1021, 1022};
BSpline(14) = {1022, 1023, 1024, 1025, 1026, 1027, 1028, 1029, 1030, 1031, 1032, 1033, 1034, 1035, 1036, 1037, 1038, 1039, 1040, 1041, 1042, 1043, 1044, 1045, 1046, 1047, 1048, 1049, 1050};
BSpline(15) = {1050, 1051, 1052, 1053, 1054, 1055, 1056, 1057, 1058, 1059, 1060, 1061, 1062, 1063, 1064, 1065, 1066, 1067, 1068, 1069, 1070, 1071, 1072, 1073, 1074, 1075};
BSpline(16) = {1075, 1076, 1077, 1078, 1079, 1080, 1081, 1082, 1083, 1084, 1085, 1086, 1087, 1088, 1089, 1090, 1091, 1092, 1093, 1094, 1095, 1096, 1097, 1098, 1099, 1001, 1002};

BSpline(17) = {1102, 1103, 1104, 1105, 1106, 1107, 1108, 1109, 1110, 1111, 1112, 1113, 1114, 1115, 1116, 1117, 1118, 1119, 1120, 1121, 1122};
BSpline(18) = {1122, 1123, 1124, 1125, 1126, 1127, 1128, 1129, 1130, 1131, 1132, 1133, 1134, 1135, 1136, 1137, 1138, 1139, 1140, 1141, 1142, 1143, 1144, 1145, 1146, 1147, 1148, 1149, 1150};
BSpline(19) = {1150, 1151, 1152, 1153, 1154, 1155, 1156, 1157, 1158, 1159, 1160, 1161, 1162, 1163, 1164, 1165, 1166, 1167, 1168, 1169, 1170, 1171, 1172, 1173, 1174, 1175};
BSpline(20) = {1175, 1176, 1177, 1178, 1179, 1180, 1181, 1182, 1183, 1184, 1185, 1186, 1187, 1188, 1189, 1190, 1191, 1192, 1193, 1194, 1195, 1196, 1197, 1198, 1199, 1200, 1102};

Line(21) = {1002, 1102};
Line(22) = {1022, 1122};
Line(23) = {1050, 1150};
Line(24) = {1075, 1175};

Curve Loop(5) = {17, -22, -13, 21};
Surface(5) = {5};
Curve Loop(6) = {18, -23, -14, 22};
Surface(6) = {6};
Curve Loop(7) = {23, 19, -24, -15};
Surface(7) = {7};
Curve Loop(8) = {24, 20, -21, -16};
Surface(8) = {8};
Transfinite Curve {13, 14, 15, 16, 17, 18, 19, 20} = 30 Using Progression 1;
Transfinite Curve {21, 22, 23, 24} = 3 Using Progression 1;
Transfinite Surface {5} = {1102, 1122, 1022, 1002};
Transfinite Surface {6} = {1050, 1022, 1122, 1150};
Transfinite Surface {7} = {1150, 1175, 1075, 1050};
Transfinite Surface {8} = {1175, 1102, 1002, 1075};

//// CONNECT TOP - BOTTOM
Line(25) = {1, 1002};
Line(26) = {22, 1022};
Line(27) = {50, 1050};
Line(28) = {75, 1075};

Line(29) = {102, 1102};
Line(30) = {122, 1122};
Line(31) = {150, 1150};
Line(32) = {175, 1175};

// Internal Surf
Curve Loop(9) = {4, 25, -16, -28};
Surface(9) = {9};
Curve Loop(10) = {13, -26, -1, 25};
Surface(10) = {10};
Curve Loop(11) = {14, -27, -2, 26};
Surface(11) = {11};
Curve Loop(12) = {28, -15, -27, 3};

// External Surf
Surface(12) = {12};
Curve Loop(13) = {32, 20, -29, -8};
Surface(13) = {13};
Curve Loop(14) = {29, 17, -30, -5};
Surface(14) = {14};
Curve Loop(15) = {6, 31, -18, -30};
Surface(15) = {15};
Curve Loop(16) = {32, -19, -31, 7};
Surface(16) = {16};

// Transfinite curve on connective vertical lines
Transfinite Curve {25, 26, 27, 28, 29, 30, 31, 32} = 5 Using Progression 1;

// Transfinite surface - internal vertical surfaces
Transfinite Surface {9}; //= {1075, 75, 1, 1002};
Transfinite Surface {10}; //= {1002, 1, 22, 1022};
Transfinite Surface {11}; //= {1022, 22, 50, 1050};
Transfinite Surface {12}; //= {1050, 50, 75, 1075};

// Transfinite surface - external vertical surfaces
Transfinite Surface {13}; //= {1175, 175, 102, 1102};
Transfinite Surface {14}; //= {1102, 102, 122, 1122};
Transfinite Surface {15}; //= {1122, 122, 150, 1150};
Transfinite Surface {16}; //= {1150, 150, 175, 1175};

Recombine Surface {1, 2, 3, 4};
Recombine Surface {5, 6, 7, 8};
Recombine Surface {9, 10, 11, 12};
Recombine Surface {13, 14, 15, 16};

//Surface Loop(20) = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16};
Curve Loop(17) = {24, -32, -12, 28};
Surface(17) = {17};
Curve Loop(18) = {23, -31, -11, 27};
Surface(18) = {18};
Curve Loop(19) = {21, -29, -9, 25};
Surface(19) = {19};
Curve Loop(20) = {22, -30, -10, 26};
Surface(20) = {20};
Transfinite Surface {17};
Transfinite Surface {18};
Transfinite Surface {19};
Transfinite Surface {20};
Recombine Surface {17, 18, 19, 20};
Surface Loop(100) = {3, 7, 12, 16, 17, 18};

Surface Loop(101) = {4, 8, 13, 9, 17, 19};
Surface Loop(102) = {1, 5, 10, 14, 19, 20};
Surface Loop(103) = {2, 6, 11, 15, 18, 20};

Volume(1) = {100};
Volume(2) = {101};
Volume(3) = {102};
Volume(4) = {103};
Transfinite Volume{1};
Transfinite Volume{2};
Transfinite Volume{3};
Transfinite Volume{4};
